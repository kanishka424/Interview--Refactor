about rate limiting

we will be solving thunnder heard
to avoid this we do RATE LIMITING

SAY YOU HAVE FOUR SERVER AND REQUEST RANGE FROM 0-400
EVERY SERVER IS LOAD ABLANCED TO 100 REQUESTS

TIME 0.57 IMAGE

AY "S1" CRASHED NOW OTHER ERVERS WILL TAKE ADDITIONLA LOAD(S1,S2,S3,S4)

NOW LOAD ABLANCER WOULD BE SMART AND DISRIBUTE REQUESTS AMONG OTHER SERVERS EQUALLY!!

THE CRAHING DID NOT EFFECT USERS  BECAUSE REST OF THE SERVERS HANDLING REQUESTS THAT WERE ASSIGNED TO S1

LET SAY S4 HAD VERY LITTLE COPUTATIONAL POWER SO AS SOON AS ADDITIONAL DATA ADDED IT CRASHES

NOW S2 AND S3 GETS ADDITIONAL LOADS IMAGE TIME 2.24 NOW S3 IS TAKING SO MUCH DATA SO THERE IS A GOOD CAHNCE S3 WILL ALO CRASHED

NOS S2 HAS TO SERVER 400% OF ITS ORIGINAL LOAD NOW S2 WILL ALSO CRASH

THIS IS CALLED CASCADING FAILING PROBELM AND THE FIRSST PROBLEM WE WILL MITITGATE

THIST CASCADING FAILURE IS A RACE AGAINST TIME

WHEN S1 CRASH YOU HAD THAT SMALL TIME WHERE (DELTA) TO BRING ANOTHER SERVER UP BEFORE S2 GETS TAKES THAT RESPONSIBILITY UPON IT
THERE ARE SOME WORKAROUNDS AND ONE POSSIBLE SOLUTION 
ONE WORKAROUND IS STOP SERVING  REQUEST FROM 1-100 (REQUET RANGE FOR S1)
IF YOU SEE THAT REQUEST CANT BE SERVERD ITS BETTER TO BE AVAILABLE FOR SOME USERS RATHER THAN EVERY USER/THIS IS A WORK AROUND ONLY

TIME IMAGE 4.37
WAHT WE CAN DO I  INTRODUCE A QUEUE TO PUT REQUESTS AND EVERY SERVER TO HAVE A QUEUE SO THE SERVERS CAN DECIDE ANSWERING OR NOT ANSWERING A REQUEST


WE WILL GIVE EACH SERVER COMPUTE REQUEST

S1-100REQUEST PER SECOND
S2-200 REQUEST PER SECOND
S3-300 RE PER SECOND
S4-400 PER SECOND


LOOKING AT S4 WE KNOW PER SECOND IT CAN ONLY TAKE 300 REQUEST MAX AND WE WILL STORE THOSE REQUEST IN THAT QUEUE BUT AS SOON AS 301 WE HAVE TO STOP IT WE WONT STORE IT IN QUEEU OF S4 WE WOULD SAY NO TO IT*****IMPORRANT*****
NOW CLIENT IS AWARE THAT THIS REQUEST FAILED AND AFTER SOME TIME WE NEED TO TRY AGAIN   USER EXPERINCE IS GOING TO BE BAD BUT AGAIN SERVING SOME REQUEST RATHER THAN SERVING NO REQUSET IS BAD
IF THE CLIENT IS BOMBARDING THE SYSTEM SAYING :"ANWER MY REQUEST ANSWER MY REQUEST.."  THIS APPRAOCH IS GOING TO BE BAD
THER ARE SOME ERRORS YOU CAN SEND THE CLIENT ONE IS  TEMPORARY AND ONE IS BAD
IF YOU SAY "PERMANT" THER IS SOME SERIOUS WRONG IN THE REQUET YOU SENT AND LOGIXCCAL ERRORS

"TEMPORY" MEAN THERE IS SOME SERVER ERROR OR DB IS SLOW OR TOO MUCH LOAD
SO THE CLIENT CAN DISPLAY ESAGES ACCORINGLY
(QUESTION -HOW DOES THE SERVER GIVES ERROR CAN WE CONFIGURE IT)
THE GERNAL IDEA IS LIMIT THE NUMBER OF REQUEST YOU CAN TAKE ON SERVER SIDE TILL THE SCALING BIT COME  TILL YOU CAN BRING NEW SERVICE  


SECOND PROBLEM (TIME 6.56)

IF YOU GOES VIRAL /BLACK FRIDAY MORE REQUEST START COMING IND
SALES GO UP ON BALCK FRIDAY
WHEN YOU HAVE AN EVENT YOU CAN SCALE BEFORE HAND
IF YOU HAVE FOUR SERVER NOW FOR BLACK FRIDAY TAKE SIX SERVERS
THAT IS  THE FIRST SOLUTION
1)PRE SCALE
HOWEVER IF YOU ARE NOT SURE ON THE NUMBER OF SERVICES YOU CAN AUTO SCALE
2)AUTO SCALE -PROVIDED BY CLOUD SERVICES
NOT A BAD SOLUTION BECAUSE INCREASE OF TRAFFIC MEANS YOU WILL MAKE MORE MONEY 


IF YOU GO VIRAL 
YOU CAN FALL BACK TO 3)RATE LIMITING(WE DISCUSSED BEFORE)


1)PRE SCALE
2)AUTO SCALE
3)RATE LIMITING


PRE CALING IS NOT SOLUTIN FOR GOING VIRAL
AUTO SCALING AND RATE LIMITING ARE



3)THIRD PROBLEM IS A REAL SERVER SIDE PROBLEM
THAT IS JOB SCHEDULING


WE DECIDE WHEN A CRON JOB MUST RUN
EG - SENDING ALL USERS EMAIL SAYING HAPPY NEW YEAR ON  1ST OF JANUARY


IF YOU DO IT IN NAIVE WAY YOU WILL SEND EMAILS TO ALL USERS AS SOON AS CLOACK HITS 12 IF YOU HAVE ONE MILLION USERS THERE WILL BE HUGE HERD COMING 

YOU HAVE TO DO IS DIVIDE THE JOB INTO SMALLER CHUNKS IF YOU HAVE ONE MILLION USERS
TAKE FIRST 1000 USERS AND SEND EMAILS THEN TAKE SEOND 1000(1000-2000) AND SEND EMAILS IN SECOND MINUTE THIRD THOUSAND (3000-4000) IN THIRD MINUTE ETC....
THIS WAY THE SERVERS WONT OVERLOAD


4) FOURTH PROBLEM

SOME ONE POPULAR POST SOMETHING

ADDING "JITTER" WAS DONE BY YOUTUBE


FIFTH SOLUTION IS 

5) APPROXIMATE STATISTICS


SUMMARY 

PROBLEMS
CASCADING FAILURE
GOING VIRAL
PREDICATBLE LOAD INCREASE
BULK JOB SCHEDULING
POPULA POST


SOLUTION S1
RATE LIMITING
PRE SACLE
AUTO SCALE 
BATH PROCESSING
APPROXIMATE STATISCTIC 



OTHER TAHN THIS THERE ARE SOME GOO PRACTICES TO RESOLVE THESE PROBLEMS

TIME REAMINING ***03.45  TKE NOTE

6.CACAHING (KEY,VLUE) PAIR
7. GRADUALLY DEPLOYMENT
8/.COU[LING






























